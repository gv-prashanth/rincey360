/*
	UIZE JAVASCRIPT FRAMEWORK 2010-04-14

	http://www.uize.com/reference/Uize.Wsh.AutoScruncher.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Wsh.AutoScruncher',required:['Uize.Scruncher','Uize.Date','Uize.String','Uize.String.Lines'],builder:function(){var _a=function(){};_a.getScrunchedFolderPath=function(_b,_c,_d){var _e=Uize.Wsh.getScriptFolderPath(),_f=_d?_d.length:0;return(_f?(_b.slice(-_f)==_d?_b.slice(0,-_f-1):null):(_c&&_e+'\\'+_c)+_b.substr(_e.length));};_a.perform=function(_g){var _h=Uize.Date.toIso8601(),_i=/\.js$/,_j=WScript.ScriptName;function _k(_b){return _a.getScrunchedFolderPath(_b,_g.buildFolderPath,_g.sourceFolderName);}Uize.Wsh.buildFiles(Uize.copyInto({logFileName:_j.replace(_i,'-js-files.log'),targetFolderPathCreator:_k,targetFilenameCreator:function(_l){return _i.test(_l)?_l:null;},fileBuilder:function(_l,_m){var _n=_l.indexOf('Uize.'),_o=Uize.Scruncher.scrunch(_m,_n?'':'KEEPHEADCOMMENT="FALSE"');return{outputText:(_n?'':('/*\n'+'\tUIZE JAVASCRIPT FRAMEWORK '+_h+'\n'+'\n'+'\thttp://www.uize.com/reference/'+_l.replace(_i,'')+'.html\n'+
'\tAvailable under MIT License or GNU General Public License -- http://www.uize.com/license.html\n'+'*/\n'))+_o.scrunchedCode,logDetails:Uize.String.Lines.indent(_o.report,2)+'\n'};}},_g));var _p=/\/\*\s*Library\s*Contents/i,_q=/^[a-zA-Z_$]/,_r=_k(Uize.Wsh.getScriptFolderPath()+'\\'+_g.moduleFolderPath),_s='/*______________\n'+'|       ______  |   B U I L T     O N     U I Z E     F R A M E W O R K\n'+'|     /      /  |   ---------------------------------------------------\n'+'|    /    O /   |   This JavaScript application is developed using the object\n'+'|   /    / /    |   oriented UIZE JavaScript framework as its foundation.\n'+'|  /    / /  /| |\n'+'| /____/ /__/_| |    ONLINE : http://www.uize.com\n'+'|          /___ |   LICENSE : Available under MIT License or GNU General Public License\n'+'|_______________|             http://www.uize.com/license.html\n'+'*/\n\n';Uize.Wsh.buildFiles(Uize.copyInto({targetFolderPathCreator:_k,targetFilenameCreator:function(_l){return/\.library.js$/.test(_l)?_l:null;},
fileBuilder:function(_l,_m){function _t(_u){var _v=_u.indexOf('/*');return(_v> -1?(_u.slice(0,_v)+_u.slice(_u.indexOf('*/',_v+2)+2)):_u);}var _w=[],_x;for(var _y= -1,_z=_m.search(_p),_A=_m.indexOf('*/',_z),_B=Uize.String.Lines.split(_z> -1?_m.slice(_z,_A).replace(_p,''):_m),_C=_B.length;++_y<_C;){var _D=Uize.String.trim(_B[_y]);if(_D&&_q.test(_D)){if(!_x)_x=Uize.String.startsWith(_D,'Uize');_w.push('\n'+_t(Uize.Wsh.readFile(_r+'\\'+_D+(_i.test(_D)?'':'.js'))));}}return{outputText:(_x?_s:'')+_m.slice(0,_z)+_w.join('\n')+_m.slice(_A+2)};}},_g,{alwaysBuild:true,logFileName:_j.replace(_i,'-libraries.log')}));};return _a;}});