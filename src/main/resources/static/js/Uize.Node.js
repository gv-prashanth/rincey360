/*
	UIZE JAVASCRIPT FRAMEWORK 2010-07-19

	http://www.uize.com/reference/Uize.Node.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Node',builder:function(){var _a=function(){},_b,_c='string',_d='function',_e=true,_f=false,_g=null,_h=typeof navigator!='undefined',_i=_h?navigator:{userAgent:'',appName:''},_j=_i.userAgent.toLowerCase(),_k=_i.appName=='Microsoft Internet Explorer',_l=_j.indexOf('applewebkit')> -1,_m=_j.indexOf('gecko')> -1,_n=_j.indexOf('opera')> -1,_o=_m||_n,_p='hidden',_q=Uize.copyInto;var _r=_a._r=function(_s){_t.clientX=_s.clientX;_t.clientY=_s.clientY;};function _u(_v){var _w=document.getElementById(_v);return(!_k||(_w&&_w.id==_v))?_w:_g;}function _x(){var _y=document[_l?'body':'documentElement'];return{scrollLeft:_y.scrollLeft,scrollTop:_y.scrollTop};}function _z(_A){var _B=(_A=_A+'').slice(_A.indexOf('(')+1,_A.indexOf(')'));return Function.apply({},(_B?_B.split(','):[]).concat(_A.slice(_A.indexOf('{')+1,_A.lastIndexOf('}'))));}function _C(_D){if(_D.charCodeAt(0)==111&&_D.charCodeAt(1)==110)_D=_D.slice(2);return(_D.charCodeAt(_D.length-1)==41&&_a.VirtualEvent?_a.VirtualEvent.resolve(_D):_D);}
function _E(_F,_G){for(var _H= -1,_w={},_I=Math.min(_F.length,_G.length);++_H<_I;)_w[_F[_H]]=_G[_H];return _w;}var _J=_a._J={},_K={},_L=0,_M={string:1,number:1,boolean:1},_t={clientX:0,clientY:0};var _N='table-',_O=_N+'row',_P=_N+'cell',_Q=_q({SPAN:'inline',THEAD:_N+'header-group',TFOOT:_N+'footer-group',LI:'list-item'},_k&&typeof DOMImplementation=='undefined'?_g:{TABLE:'table',TR:_O,TH:_P,TD:_P,TBODY:_O+'-group',COLGROUP:_N+'column-group',COL:_N+'column',CAPTION:_N+'caption'});_a.display=function(_R,_S){_S=_S===_b|| !!_S;_T(_R,function(_U){_U.style.display=_S?(_Q[_U.tagName]||'block'):'none';});};var _T=_a.doForAll=function(_R,_A,_V,_W){if(typeof _R==_c)_R=_X(_R,_V,_W);if(_R!=_b){if(_Y(_R)){_A(_R);}else{var _Z=typeof _R;if((_Z=='object'||_Z==_d)&&typeof _R.length=='number'){for(var _0= -1,_1=_R.length;++_0<_1;)_T(_R[_0],_A,_V,_W);}else if(_Z=='object'){for(var _2 in _R)_T(_R[_2],_A,_V,_W);}}}};var _3=_a.doRectanglesOverlap=function(_4,_5,_6,_7,_8,_9,_ba,_bb){return(_6-1+ +_4>=_8&&_ba-1+ +_8>=_4&&
_7-1+ +_5>=_9&&_bb-1+ +_9>=_5);};var _X=_a.getById=function(_U,_V,_W){if(typeof _U!=_c)return _U;var _w=_W?_W[_U]:_b;if(_w===_b){var _bc=_bd(_V,_U);(_w=_u(_bc))||(((_w=document.getElementsByName(_bc)).length<2)&&(_w=_w[0]||_g));if(_W)_W[_U]=_w;}return _w;};_a.find=function(_be){if(typeof _be!='object'|| !_be||typeof _be.length=='number'||_Y(_be))return _be;var _bf=document,_bg=[],_bh=_q({},_be),_bi='root'in _bh?_X(_bh.root):_bf;delete _bh.root;if(_bi){var _bj=_bh.tagName;if('id'in _bh&&_M[typeof _bh.id]){var _U=_u(_bh.id);_U&&_bg.push(_U);delete _bh.id;}else if('name'in _bh&&_M[typeof _bh.name]){_bg=_bf.getElementsByName(_bh.name);delete _bh.name;}else{var _bk=_M[typeof _bj];_bk&&delete _bh.tagName;_bg=_bi.getElementsByTagName(_bj&&_bk?_bj:'*');_bi=_g;}if(_bi==_bf)_bi=_g;if(!_bj||_bj=='*')delete _bh.tagName;}var _bl=_bg.length;for(var _bm in _bh)break;if(!_bl||(_bm==_b&& !_bi))return _bg;var _bn=[],_bo;for(var _bp= -1;++_bp<_bl;){var _U=_bg[_bp];if(_bo=_bi?_bq(_U,_bi):_e){for(var _br in _bh){var _bs=_U[_br],
_bt=_bh[_br],_bu=typeof _bt;if(!(_M[_bu]?_bs==_bt:(_bt instanceof RegExp?_bt.test(_bs||''):(_bu==_d?_bt.call(_U,_bs):_e)))){_bo=_f;break;}}}_bo&&_bn.push(_U);}return _bn;};var _bv=_a.getCoords=function(_U){var _bw=0,_bx=0,_by=0,_bz=0,_bA=_e,_bB=_x(),_bC=_bD(window);function _bE(){_bw+=_bB.scrollLeft;_bx+=_bB.scrollTop;}if(_U==window){_bE();_by=_bC.width;_bz=_bC.height;}else if(_Y(_U=_X(_U))){_by=_U.offsetWidth;_bz=_U.offsetHeight;if(!(_by&&_bz)&&_U.tagName=='DIV'){for(var _bF=_U.childNodes,_bG=_bF.length;--_bG>=0;){if(_bF[_bG].nodeName.charAt(0)!='#'){var _bH=_bv(_bF[_bG]);if(_bH.width||_bH.height){_by=Math.max(_by,_bH.right-_bw+1);_bz=Math.max(_bz,_bH.bottom-_bx+1);}}}}function _bI(_U){return _bJ(_U,'display')=='none'||_bJ(_U,'visibility')==_p;}if(_U.tagName=='A'&&_U.childNodes.length==1&&_U.childNodes[0].tagName=='IMG')_U=_U.childNodes[0];var _bK=_bA= !_bI(_U),_bL=_U,_bM=_U;while(_bM.parentNode&&typeof _bM.parentNode!='unknown'){var _bN=_bM.offsetLeft||0,_bO=_bM.offsetTop||0,_bP=_bM.offsetWidth,
_bQ=_bM.offsetHeight;if(_bA&&_bI(_bM))_bA=_f;if(_bM==_bL){_bw+=_bN+(parseInt(_bJ(_bM,'borderLeftWidth'))||0);_bx+=_bO+(parseInt(_bJ(_bM,'borderTopWidth'))||0);_bL=_bM.offsetParent;_bJ(_bM,'position')=='fixed'&&_bE();}if(_bM!=_U&&_bM!=document.body&&_bM!=document.documentElement&&(_bM.scrollWidth>_bP||_bM.scrollHeight>_bQ)){_bw-=_bM.scrollLeft;_bx-=_bM.scrollTop;if(_k){_bw+=_bM.clientLeft;_bx+=_bM.clientTop;}if(_bA)_bA=_3(_bw,_bx,_by,_bz,_bN,_bO,_bP,_bQ);}_bM=_bM.parentNode;}if(_bA)_bA=_3(_bw,_bx,_by,_bz,_bB.scrollLeft,_bB.scrollTop,_bC.width,_bC.height);}return{x:_bw,y:_bx,width:_by,height:_bz,area:_by*_bz,left:_bw,top:_bx,right:_bw+_by-1,bottom:_bx+_bz-1,seen:_bA};};var _bD=_a.getDimensions=function(_U){if(_U==window){var _y=document.documentElement;return{width:_y.clientWidth||window.innerWidth||_y.offsetWidth,height:_y.clientHeight||window.innerHeight||_y.offsetHeight};}else if(_U=_X(_U)){return{width:_U.offsetWidth||parseInt(_bJ(_U,'width'))||0,height:_U.offsetHeight||parseInt(_bJ(_U,'height'))||0};}else{
return{width:0,height:0};}};_a.getEffectiveBgColor=function(_U){var _bR='';_U=_X(_U);while((!_bR||_bR=='transparent'||_bR=='none')&&_U){_bR=_bJ(_U,'backgroundColor');_U=_U.parentNode;}return _bR;};var _bS=_a.getOpacityProperties=function(_bT){return _k?{filter:'alpha(opacity='+Math.round(_bT*100)+')'}:{opacity:_bT+''};};_a.getOpacityStr=function(_bT){return _bU(_bS(_bT));};var _bV={borderColor:['border','Color'],borderWidth:['border','Width'],padding:1,margin:1},_bJ=_a.getStyle=function(_U,_bW){var _bX='';if(typeof _bW==_c){if(_U){var _bY=_k&&_bW=='opacity',_bZ=document.defaultView,_b0=_bZ&&_bZ.getComputedStyle(_U,'');if(_bY)_bW='filter';if(_b0){if(!(_bX=_b0[_bW])){var _b1=_bV[_bW];if(_b1){var _b2=_b1[0]||_bW,_b3=_b1[1]||'',_b4=_b0[_b2+'Top'+_b3],_b5=_b0[_b2+'Right'+_b3],_b6=_b0[_b2+'Bottom'+_b3],_b7=_b0[_b2+'Left'+_b3];_bX=_b4==_b5&&_b5==_b6&&_b6==_b7?_b7:_b4+' '+_b5+' '+_b6+' '+_b7;}}}else{var _b8=_U.currentStyle;_bX=_b8?_b8.getAttribute(_bW):_U.style[_bW];}if(_bY){
var _b9=_bX.match(/alpha\s*\(\s*opacity\s*=([^\)]*)\)/i);_bX=_b9?_b9[1]/100:1;}}}else{_bX={};if(_U)for(_bW in _bW)_bX[_bW]=_bJ(_U,_bW);}return _bX;};var _ca=_a.getText=function(_U){var _cb='';if(_U=_X(_U)){function _cc(_U){if(typeof _U.innerText==_c){_cb+=_U.innerText.replace(/\r|\n|\r\n/g,'');}else if(typeof _U.textContent==_c){_cb+=_U.textContent;}else{if(_U.nodeType==3)_cb+=_U.data;if(_U.childNodes){for(var _bG= -1,_bF=_U.childNodes,_cd=_bF.length;++_bG<_cd;)_ca(_bF[_bG]);}}}_cc(_U);}return _cb;};_a.getValue=function(_U){var _bX;if(_U=_X(_U)){if(_Y(_U)){var _ce=_U.tagName;if(_ce=='TEXTAREA'){_bX=_U.value;}else if(_ce=='INPUT'){_bX=_U.type=='checkbox'?_U.checked:_U.value;}else if(_ce=='SELECT'){if(_U.multiple){_bX=[];for(var _cf= -1,_cg=_U.options,_ch=_cg.length,_ci;++_cf<_ch;)(_ci=_cg[_cf]).selected&&_bX.push(_ci.value);}else{_bX=_U.value;}}else if(_ce=='IMG'){_bX=_U.src;}else{_bX=_U.innerHTML.replace(/<br\/?>/gi,'\n').replace(/&nbsp;/g,' ');}}else{
_bX=(Uize.findRecord(_U,{tagName:'INPUT',type:'radio',checked:_e})||{}).value;}}return _bX;};_a.injectHtml=function(_R,_cj,_ck){var _cl,_cm,_cn,_co,_cp,_cq;((_cl=_ck=='inner replace')||(_cm=_ck=='outer replace')||(_cn=_ck=='inner top')||(_co=_ck=='outer top')||(_cp=_ck=='outer bottom')||(_cq=_e));_cj+='';_T(_R,function(_U){var _cr=_U.childNodes;function _cs(_ct){return _ct&&/<script/i.test(_ct);}function _cu(){return _cs(_cj);}if((_cl||(!_cr.length&&(_cn||_cq)))&& !_cu()){_U.innerHTML=_cj;}else if(_cm&&_k&& !_cu()){_U.outerHTML=_cj;}else{if(_cl)_U.innerHTML='';var _cv=document.createElement('DIV');_cv.innerHTML=_cj;var _cw=_cn?_cr[0]:_cp?_U.nextSibling:_U,_cx=_cv.childNodes,_cy=_U.parentNode;function _cz(_U){if(_U.tagName=='SCRIPT'){var _cA=document.createElement('script');if(_U.id)_cA.id=_U.id;if(_U.type)_cA.type=_U.type;_cA.text=_U.text;if(_U.src)_cA.src=_U.src;_U.parentNode.replaceChild(_cA,_U);}else if(_cs(_U.innerHTML)){for(var _bG= -1,_cr=_U.childNodes,_cB=_cr.length;++_bG<_cB;)_cz(_cr[_bG]);}}
while(_cx.length){var _cC=_cx[0];if(_cq||_cl){_U.appendChild(_cC);}else if(_cn){_cw?_U.insertBefore(_cC,_cw):_U.appendChild(_cC);}else if(_co||_cm){_cy.insertBefore(_cC,_cw);}else if(_cp){_cw?_cy.insertBefore(_cC,_cw):_cy.appendChild(_cC);}_cz(_cC);}_cm&&_cy.removeChild(_U);}});};var _Y=_a.isNode=function(_U){return!!(_U&&typeof _U=='object'&&(_U.getAttribute||_U.documentElement||(_U.self&&_U.self==_U)));};var _bq=_a.isOnNodeTree=function(_U,_cD){_U=_X(_U);_cD=_X(_cD);while(_U){if(_U==_cD)return _e;_U=_U.parentNode;}return _f;};var _bd=_a.joinIdPrefixAndNodeId=function(_V,_v){return(_V||'')+(_V&&_v?'-':'')+_v;};_a.remove=function(_R){_T(_R,function(_U){_U.parentNode.removeChild(_U)});};_a.setClipRect=function(_R,_b4,_b5,_b6,_b7){var _cE='rect('+_b4+'px, '+_b5+'px, '+_b6+'px, '+_b7+'px)';_T(_R,function(_U){_U.style.clip=_cE});};var _cF=['left','top','width','height'];_a.setCoords=function(_R,_cG){_cH(_R,typeof _cG.length=='number'?_E(_cF,_cG):_cG);};_a.centerInWindow=function(_R){var _cI=_bv(window);_T(_R,
function(_U){var _cJ=_bD(_U);_a.setCoords(_U,{left:_cI.x+((_cI.width-_cJ.width)>>1),top:_cI.y+((_cI.height-_cJ.height)>>1)});});};_a.getEventAbsPos=function(_s){var _bB=_x();return{left:(_s||_t).clientX+_bB.scrollLeft,top:(_s||_t).clientY+_bB.scrollTop};};var _cK=_a.setAbsPos=function(_R,_cL,_cM){_cM=typeof _cM=='number'?{x:_cM,y:_cM}:(_cM||{x:0,y:0});var _y=document[_l?'body':'documentElement'],_cN=_bD(window);_T(_R,function(_U){function _cO(_cP,_cQ,_cR,_cS){var _cT=_cL[_cP],_cU=_cM[_cS],_cV=_cT-_y[_cQ],_cW=_cU+_cJ[_cR];return(_cT+(_cV+_cW>_cN[_cR]?Math.max(-_cW,-_cV):_cU));}var _cJ=_bD(_U);_cH(_U,{left:_cO('left','scrollLeft','width','x'),top:_cO('top','scrollTop','height','y'),right:'auto',bottom:'auto'});});};_a.setAbsPosAdjacentTo=function(_R,_cX,_cY){_cX=_X(_cX);var _cZ=_bv(_cX),_c0=_cZ.width/2,_c1=_cZ.height/2,_c2=_cY=='x'? -1:1;if(!_c0&& !_c1)_cZ=_a.getEventAbsPos();_T(_R,function(_U){_cK(_U,{left:_cZ.left+_c0,top:_cZ.top+_c1},{x:-_c0*_c2,y:_c1*_c2});});};_a.setInnerHtml=function(_R,_ct){_ct+='';
_T(_R,function(_U){_U.innerHTML=_ct});};var _c3={};_a.setOpacity=function(_R,_bT){_c3.opacity=_bT;_cH(_R,_c3);};_a.setProperties=function(_R,_be){_T(_R,function(_U){_q(_U,_be)});};var _cH=_a.setStyle=function(_R,_be){_T(_R,function(_U){var _c4=_U.style,_c5;if(_k&&'opacity'in _be)_c4.filter=(_c5=Math.round(_be.opacity*100))<100?'alpha(opacity='+_c5+')':'';for(var _bW in _be)_c4[_bW]=(typeof(_c5=_be[_bW])=='object'&&_c5?(_c5=_c5.valueOf()):_c5)!=_b?(typeof _c5=='number'&&_bW!='opacity'&&_bW!='zIndex'?Math.round(_c5)+'px':_c5+''):'';});};_a.setValue=function(_R,_bX){_bX+='';_T(_R,function(_U){var _ce=_U.tagName,_c6=_U.readOnly;if(_c6)_U.readOnly=_f;if(_ce=='TEXTAREA'){_U.value=_bX;}else if(_ce=='INPUT'){var _c7=_U.type;if(_c7=='text'||_c7==_p||_c7=='password'){_U.value=_bX;}else if(_c7=='checkbox'){_U.checked=_bX=='true';}else if(_c7=='radio'){_U.checked=_U.value==_bX;}}else if(_ce=='SELECT'){if(!_bX){_U.selectedIndex= -1;}else{var _cg=_U.options;if(_U.multiple&&(_bX=='*'||_bX.indexOf(',')> -1)){var _c8;
if(_bX!='*'){_c8={};for(var _G=_bX.split(','),_H=_G.length;--_H>=0;)_c8[_G[_H]]=1;}for(var _cf=_cg.length,_ci;--_cf>=0;)(_ci=_cg[_cf]).selected= !_c8||_c8[_ci.value];}else{_U.selectedIndex=Uize.findRecordNo(_cg,{value:_bX},_U.selectedIndex);}}}else if(_ce=='IMG'){if(_bX)_U.src=_bX;}else{_ce=='PRE'&&_k?(_U.innerText=_bX):(_U.innerHTML=_bX.replace(/</g,'&lt;').replace(/\n/g,'<br/>'));}if(_c6)_U.readOnly=_c6;});};_a.show=function(_R,_c9){_cH(_R,{visibility:_c9||_c9===_b?'inherit':_p});};_a.showClickable=function(_R,_da){_cH(_R,{cursor:_da||_da===_b?(_k?'hand':'pointer'):'default'});};_a.showInLayoutFlow=function(_R,_c9){_c9=_c9!==_f;_cH(_R,{position:_c9?'static':'absolute',visibility:_c9?'inherit':_p});};var _bU=_a.stylePropertiesAsStr=function(_be){var _db=[];for(var _bW in _be)_db.push(_bW,':',_be[_bW],'; ');return _db.join('');};var _dc=_a.unwire=function(_R,_dd,_de,_df){if(typeof _dd=='object'&&_dd&& !_dd.virtualDomEvent){for(var _D in _dd)_dc(_R,_D,_dd[_D],_de);}else{_a.unwireEventsByOwnerId(_df,
_R!==_b||_dd!=_b||_de!=_b?{node:_R,eventName:_dd,handler:_de}:_b);}};_a.unwireEventsByOwnerId=function(_dg,_dh){var _di=_K[_dg=_dg||''];if(_di){function _dj(_dk){if(_dk!==_g){var _dl=_dh&&_dh.eventName,_dm=_dh&&_dh.handler,_dn=_dk||_dl||_dm;if(_dl&&_dl.charCodeAt)_dl=_C(_dl);for(var _do=_di.length;--_do>=0;){var _dp=_di[_do],_dq=_J[_dp],_U=_dq._U,_D=_dq._D;if(!_dn||((!_dk||_dk==(_dq._dr||_U))&&(!_dl||_dl==_D)&&(!_dm||_dm==_dq._ds))){_dn&&_di.splice(_do,1);if(_dq._dt){_a.unwireEventsByOwnerId(_dq._dt)}else{try{_U==window?_du.unwire(_D,_dq._dv):_k?_U.detachEvent('on'+_D,_dq._dv):_U.removeEventListener(_D,_dq._dv,_f);}catch(_dw){}}delete _J[_dp];}}(_dn&&_di.length)||delete _K[_dg];}}_dh&&_dh.node!==_b?_T(_dh.node,_dj):_dj();}};var _dx=_z(function(_dp){return(function(_s){var _dq=window.Uize&&Uize.Node._J[_dp];return _dq&&_dq._ds.call(_dq._U,_s.windowEvent);});}),_dy=_z(function(_dp){return(function(_s){var _dq=window.Uize&&Uize.Node._J[_dp];return _dq&&_dq._ds.call(_dq._U,_s||window.event);});}),_dz={click:_dy,
mouseover:_z(function(_dp){return(function(_s){var _dq=window.Uize&&Uize.Node._J[_dp],_dA=(_s||(_s=window.event)).fromElement||_s.relatedTarget;if(_dq){if(_dA){try{if(!_dA.Uize_Widget_Drag_shield&& !Uize.Node.isOnNodeTree(_dA,_dq._U))_dA=null;}catch(_dw){_dA=null;}}if(!_dA){Uize.Node._r(_s);return _dq._ds.call(_dq._U,_s);}}});}),mouseout:_z(function(_dp){return(function(_s){var _dq=window.Uize&&Uize.Node._J[_dp],_dB=(_s||(_s=window.event)).toElement||_s.relatedTarget;if(_dq){if(_dB){try{if(!_dB.Uize_Widget_Drag_shield&& !Uize.Node.isOnNodeTree(_dB,_dq._U))_dB=null;}catch(_dw){_dB=null;}}if(!_dB)return _dq._ds.call(_dq._U,_s);}});}),mousedown:_dy,mouseup:_dy};_a.wireEvent=_a.wireEvents=_a.wire=function(_R,_D,_ds,_dg){if(!_D)return;if(_dg==_b)_dg='';var _dC;if(_D.charCodeAt)_D=_C(_D);if(typeof _D=='object'&& !(_dC= !!_D.virtualDomEvent)){_dg=arguments[2]||'';for(var _s in _D)_a.wire(_R,_s,_D[_s],_dg);return;}_T(_R,function(_U){var _ce=_U.tagName;(_K[_dg]||(_K[_dg]=[])).push(_L);var _dv=(_dC?_a.returnFalse
:_U==window?_dx:_dz[_D]||_dy)(_L);var _dq=_J[_L++]={_U:_U,_D:_D,_ds:_ds,_dv:_dv};if(_o&&_ce=='BODY'&&_D=='scroll'){_dq._dr=_U;_U=_dq._U=document;}if(_dv){var _dD='on'+_D;_U==window?_du.wire(_D,_dv):_k?_U.attachEvent(_dD,_dv):_U.addEventListener(_D,_dv,_f);if(_ce=='A'&&(_D=='mousedown'||_D=='click')&& !_U[_dD])_U[_dD]=_a.returnFalse;}else if(_dC){_D.wire(_U,_ds,_dq._dt=Uize.getGuid());}});};_a.returnFalse=new Function('return false');_a.returnTrue=new Function('return true');_a.isIe=_k;_a.isSafari=_l;_a.isMozilla=_m;if(_h){_a.wire(document.documentElement,'mousemove',_r);var _du=new Uize,_dE=setTimeout(function(){_du.fire('load')},15000);function _dF(_dG){var _dH='on'+_dG,_dI=window[_dH]||_a.returnFalse;window[_dH]=function(_s){_dG=='load'&&clearTimeout(_dE);_dI.call(window,_s||(_s=window.event));_du.fire({name:_dG,windowEvent:_s});};}for(var _dG in{focus:1,blur:1,load:1,beforeunload:1,unload:1,resize:1,scroll:1})_dF(_dG);;}return _a;}});